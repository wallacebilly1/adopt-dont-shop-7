<h1>Name: <%= @adoption_application.name %></h1>
<h3>Address: <%= @adoption_application.street_address %> 
  <%= @adoption_application.city %>,
  <%= @adoption_application.state %> 
  <%= @adoption_application.zip_code %></h3>
<h3>Description: <%= @adoption_application.description %></h3>
<h3>Status: <%= @adoption_application.status %></h3>

<% if @adoption_application.pets.any? %>
  <h3>Pets applied for:</h3>
  <ol>
    <% @adoption_application.pets.each do |pet| %>
      <li>
        <%= link_to "#{pet.name}", "/pets/#{pet.id}" %>
      </li>
    <% end %>
  </ol>
<% end %>

<% if @adoption_application.status == "In Progress" %>
  <h3> Add a Pet to this application </h3>
  <%= form_with url: "/adoption_applications/#{@adoption_application.id}", method: :get, data: { turbo: false } do |form| %>
    <%= form.label :name, "Search pets by name: " %>
    <%= form.text_field :name %>
    <%= form.submit "find pet" %>
  <% end %>
<% end %>

<% if @pet.class == String %>
  <p>Could not find pet by the name of <%= @pet %>
<% elsif @pet %>
  <p>
    <strong><%= @pet.name %></strong>&emsp;
    <%= form_with url: "/adoption_applications/#{@adoption_application.id}", method: :get do |form| %>
      <%= form.hidden_field :adopt_pet_id, value: "#{@pet.id}" %>
      <%= form.submit "Adopt" %>
    <% end %>
  </p>
  <p>Age: <%= @pet.age %></p>
  <p>Breed: <%= @pet.breed %></p>
  <p>Adoptable: <%= @pet.adoptable %></p>
  <p>You can find <%= @pet.name %> at <%= @pet.shelter.name %>!</p>
<% end %>

<% if @adoption_application.pets.any? %>
  <section id="submit_your_application">
  <h2> Submit your application </h2>
  <%= form_with url: "/adoption_applications/#{@adoption_application.id}", method: :patch, local: :true do |form| %>
    <%= form.label "Why would you make a good owner for these pet(s):" %>
    <%= form.text_area :description%> </br> </br>
    <%= form.submit "Submit your Application" %>
  <% end %>
  </section>
<% end %>
<!--
<p><%= link_to "Update #{@adoption_application.name}", "adoption_applications/#{@adoption_application.id}/edit" %></p>
<p><%= link_to "Delete #{@adoption_application.name}", "@adoption_applications/#{@adoption_application.id}", method: :delete %></p>
-->